{% extends "base.html" %}

{% block title %}GEX Analysis{% endblock %}

{% block content %}
<div class="col-9 d-flex p-3 justify-content-md-center align-items-center">
	<div class="scrollarea">
	  <form id='form'
		hx-encoding='multipart/form-data' hx-post='/predictions/upload/'>
		<div class="card" id="form-wrapper">
		  <div class="card-header">
			Gene Expression Analysis
		  </div>
		  
		  <div class="card-body">
			
			<div class="clearfix">
			  <div class="input-group mb-3">
				<label class="input-group-text" for="fgex">GEX</label>
				<input type='file' class="form-control" name='gex' id='fgex'>
			  </div>
			  
			  <div class="input-group mb-3">
				<label class="input-group-text" for="fphenotype">Phenotype</label>
				<input type='file' class="form-control" name='phenotype' id="fphenotype">
			  </div>
			  
			  <button class="btn btn-primary float-end">
				Upload
			  </button>
			</div>
			
			
			
			
		  </div>
		</div>

		<div id="spinner" class="text-center d-none">
		  <div class="spinner-border text-secondary p-3" role="status">
			<span class="visually-hidden">Loading...</span>
		  </div>
		  <h5 class="p-3 align-self-center">Uploading</h5>
		</div>
	  </form>
	</div>
  </div>
</main>


<script>
  document.addEventListener("DOMContentLoaded", function() {
	htmx.on('#form', 'htmx:xhr:progress', function(evt) {
	  form = document.getElementById('form-wrapper');
	  form.classList.add('d-none');
	  spinner = document.getElementById('spinner');
	  spinner.classList.remove('d-none');
	});
  });
  
</script>
{% endblock %}
